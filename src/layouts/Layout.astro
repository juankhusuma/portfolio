---
import { personal } from "../config";

interface Props {
	title?: string;
	description?: string;
	image?: string;
	type?: string;
}

const {
	title = `${personal.name} | ${personal.title}`,
	description = personal.tagline,
	image = "/jdk.jpg", // Default image
	type = "website",
} = Astro.props;

const canonicalURL = new URL(
	Astro.url.pathname,
	Astro.site || personal.website,
);
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

		<!-- Canonical URL -->
		<link rel="canonical" href={canonicalURL} />

		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		<meta name="author" content={personal.name} />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={type} />
		<meta property="og:url" content={Astro.url} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={image} />

		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={Astro.url} />
		<meta property="twitter:title" content={title} />
		<meta property="twitter:description" content={description} />
		<meta property="twitter:image" content={image} />
	</head>
	<body>
		<slot />
	</body>
</html>

<script>
	import { gsap } from "gsap";

	document.addEventListener("DOMContentLoaded", () => {
		// Global scroll reveal
		const observer = new IntersectionObserver(
			(entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						gsap.to(entry.target, {
							opacity: 1,
							y: 0,
							duration: 1,
							ease: "power3.out",
							overwrite: true,
						});
						observer.unobserve(entry.target);
					}
				});
			},
			{ threshold: 0.1 },
		);

		document.querySelectorAll(".reveal-on-scroll").forEach((el) => {
			gsap.set(el, { opacity: 0, y: 50 });
			observer.observe(el);
		});
	});
</script>

<style>
	:root {
		--main-bg: #f8fafc;
		--blue: #bae6ff;
		--yellow: #b4f8c8;
	}

	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
		background-color: var(--main-bg);
		font-family: "Space Grotesk", sans-serif;
		scroll-behavior: smooth;
	}
</style>
