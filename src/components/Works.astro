---
import Bars from "./Bars.astro";

import svgUnderline from "../assets/underline.svg";
import arrowCard from "../assets/arrow-card.svg";

import { projects } from "../config";
---

<section class="py-25 space-y-10 px-5" id="work">
  <div class="max-w-md mx-auto relative reveal-on-scroll">
    <h1 class="text-5xl md:text-5xl font-medium text-center underline">
      Featured Projects
    </h1>
  </div>

  <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10">
      {
        projects.map((item) => {
          const [descText, techStack] = item.desc.split('â€¢');
          const tags = techStack ? techStack.split(',').map(t => t.trim()) : [];
          
          return (
            <div class="reveal-on-scroll flex flex-col bg-white border-2 border-black shadow-[8px_8px_0px_rgba(0,0,0,1)] transition-all duration-300 hover:shadow-[12px_12px_0px_rgba(0,0,0,1)] hover:-translate-y-1">
              {/* Window Header */}
              <div class="h-10 border-b-2 border-black bg-gray-100 flex items-center px-4 gap-2">
                <div class="w-3 h-3 rounded-full bg-red-500 border border-black"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-400 border border-black"></div>
                <div class="w-3 h-3 rounded-full bg-green-500 border border-black"></div>
                <div class="ml-auto font-mono text-xs font-bold text-gray-500 flex items-center gap-1">
                    <i class="ri-folder-open-line"></i> {item.name.toLowerCase().replace(/\s+/g, '_')}.app
                </div>
              </div>

              <div class="p-5 flex flex-col flex-1">
                  <!-- Image Link -->
                  <a href={item.link} target="_blank" class="block w-full aspect-video overflow-hidden border-2 border-black relative group mb-4">
                    <img
                      src={item.cover}
                      alt={item.name}
                      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110 pastel-filter"
                    />
                    <!-- Hover Overlay -->
                    <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <span class="bg-[var(--yellow)] border-2 border-black px-3 py-1 font-bold text-sm transform rotate-[-2deg]">VIEW PROJECT</span>
                    </div>
                  </a>
        
                  <div class="space-y-3 flex-1 flex flex-col">
                    <div class="flex items-start justify-between gap-4">
                       <h2 class="text-2xl font-bold leading-tight">{item.name}</h2>
                    </div>
                    
                    {/* Tags */}
                    {tags.length > 0 && (
                        <div class="flex flex-wrap gap-2">
                            {tags.map(tag => (
                                <span class="text-xs font-mono bg-black text-white px-2 py-0.5 border border-black">
                                    {tag}
                                </span>
                            ))}
                        </div>
                    )}

                    <p class="text-gray-600 text-sm leading-relaxed">{descText}</p>
                    
                    <!-- Dual Interaction Buttons -->
                    <div class="grid grid-cols-2 gap-3 mt-auto pt-4">
                        <a href={item.link} target={item.link === '#' ? '_self' : '_blank'} class={`flex items-center justify-center gap-2 px-3 py-2 border-2 border-black transition-all font-bold text-sm shadow-[2px_2px_0px_black] active:translate-y-[1px] active:shadow-none ${item.link === '#' ? 'bg-gray-100 opacity-50 cursor-not-allowed' : 'bg-[var(--main-bg)] hover:bg-[var(--yellow)]'}`}>
                            {item.link === '#' ? 'Coming Soon' : 'Code / Demo'} <i class="ri-github-line"></i>
                        </a>
                         <a href={item.blogLink || '#'} class={`flex items-center justify-center gap-2 px-3 py-2 border-2 border-black transition-all font-bold text-sm shadow-[2px_2px_0px_black] active:translate-y-[1px] active:shadow-none ${item.blogLink === '#' ? 'bg-white text-gray-400 cursor-not-allowed' : 'bg-white hover:bg-black hover:text-white'}`}>
                            Case Study <i class="ri-article-line"></i>
                        </a>
                    </div>
                  </div>
              </div>
            </div>
          );
        })
      }
    </div>
</section>
